{"version":3,"file":"static/js/955.ad1c7a18.chunk.js","mappings":"gNAmGA,QA5FA,WAEI,MAAMA,GAAWC,EAAAA,EAAAA,OAEjBC,EAAAA,EAAAA,YAAU,KACFC,EAAAA,EAAYC,kBAAoBD,EAAAA,EAAYC,iBAAiBC,MAAMC,SAAS,aAC5EN,EAAS,mBACHG,EAAAA,EAAYC,kBAAoBD,EAAAA,EAAYC,iBAAiBC,MAAMC,SAAS,eAClFN,EAAS,sBACb,GACD,IAGH,MAAM,SAACO,EAAQ,aAAEC,EAAY,UAACC,IAAaC,EAAAA,EAAAA,OAEpCC,EAAgBC,IAAoBC,EAAAA,EAAAA,UAAS,KAC7CC,EAAWC,IAAgBF,EAAAA,EAAAA,WAAS,GA8B3C,OACIG,EAAAA,EAAAA,KAAA,OAAKC,UAAU,YAAWC,UACtBC,EAAAA,EAAAA,MAAA,QAAMF,UAAU,YAAaG,SAAUZ,GA9B9Ba,UACbN,GAAa,SACPZ,EAAAA,EAAYmB,UAAUC,EAAKC,MAAOD,EAAKE,UAAUC,MACnD,KACId,EAAiB,IAEjBe,YAAW,KACHxB,EAAAA,EAAYC,iBAAiBC,MAAMC,SAAS,aAC5CN,EAAS,mBACHG,EAAAA,EAAYC,iBAAiBC,MAAMC,SAAS,eAClDN,EAAS,sBACb,GACD,KACH4B,aAAaC,QAAQ,UAAWC,KAAKC,UAAU,CAAEC,OAAQ,UAAWC,KAAM,uBAAwB,IAErGC,IACG,MAAMC,EAAaD,EAAME,UAAYF,EAAME,SAASb,MAAQW,EAAME,SAASb,KAAKc,SAAYH,EAAMG,SAAWH,EAAMI,WACnHC,QAAQC,IAAIL,GAERvB,EADe,oBAAfuB,EACiB,6BAEA,yCACrB,IAGRpB,GAAa,EAAM,IAK+CG,SAAA,EAC9DF,EAAAA,EAAAA,KAACyB,EAAAA,EAAI,KACDzB,EAAAA,EAAAA,KAAA,MAAAE,SAAI,UAEkB,KAAjBP,IAAwBK,EAAAA,EAAAA,KAAA,KAAAE,SAAIP,KAGjCQ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,YAAWC,SAAA,EACtBF,EAAAA,EAAAA,KAAA,SAAAE,SAAO,WAAaF,EAAAA,EAAAA,KAAA,UACpBA,EAAAA,EAAAA,KAAA,SACI0B,KAAK,UACDnC,EAAS,QAAS,CAClBoC,SAAU,qBACVC,QAAS,CAACC,MAAM,mCAAoCR,QAAQ,8BAGnE5B,EAAUqC,OAAOtB,QAASR,EAAAA,EAAAA,KAAA,SAAAE,SAAQT,EAAUqC,OAAOtB,MAAMa,cAG9DlB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,YAAWC,SAAA,EACtBF,EAAAA,EAAAA,KAAA,SAAAE,SAAO,cAAgBF,EAAAA,EAAAA,KAAA,UACvBA,EAAAA,EAAAA,KAAA,SACI0B,KAAK,cAEEnC,EAAS,WAAY,CACpBoC,SAAU,4BAIrBlC,EAAUqC,OAAOrB,WAAYT,EAAAA,EAAAA,KAAA,SAAAE,SAAQT,EAAUqC,OAAOrB,SAASY,cAEpElB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,MAAKC,SAAA,CAAC,KAACF,EAAAA,EAAAA,KAAC+B,EAAAA,GAAI,CAACC,GAAI,mCAAoC/B,UAAU,cAAaC,SAAC,yBAA6BF,EAAAA,EAAAA,KAAA,UAEzHA,EAAAA,EAAAA,KAAA,OAAKC,UAAU,YAAWC,UACtBF,EAAAA,EAAAA,KAAA,SAAO0B,KAAK,SAASG,MAAO/B,EAAY,gBAAkB,QACtDG,UAAWH,EAAY,6BAA+B,0BAG9DE,EAAAA,EAAAA,KAAA,UAAKG,EAAAA,EAAAA,MAAA,OAAKF,UAAU,MAAKC,SAAA,CAAC,gBAAYF,EAAAA,EAAAA,KAAC+B,EAAAA,GAAI,CAACC,GAAG,iBAAiB/B,UAAU,cAAaC,SAAC,yBAIxG,C","sources":["pages/auth/login/login.js"],"sourcesContent":["import {useEffect, useState} from 'react';\nimport '../../../assets/styles/register.css';\nimport {useForm} from 'react-hook-form';\nimport { Link, useNavigate} from 'react-router-dom';\nimport AuthService from '../../../services/auth.service';\nimport Logo from '../../../components/utils/Logo';\n\nfunction Login() {\n\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        if (AuthService.getCurrentUser() && AuthService.getCurrentUser().roles.includes(\"ROLE_USER\")) {\n            navigate(\"/user/dashboard\");\n        }else if (AuthService.getCurrentUser() && AuthService.getCurrentUser().roles.includes(\"ROLE_ADMIN\")) {\n            navigate(\"/admin/transactions\");\n        }\n    }, [])\n\n\n    const {register, handleSubmit,formState} = useForm();\n\n    const [response_error, setResponseError] = useState(\"\");\n    const [isLoading, setIsLoading] = useState(false);\n\n    const onSubmit = async (data) => {\n        setIsLoading(true)        \n        await AuthService.login_req(data.email, data.password).then(\n            () => {\n                setResponseError(\"\");\n\n                setTimeout(() => {\n                    if (AuthService.getCurrentUser().roles.includes(\"ROLE_USER\")) {\n                        navigate(\"/user/dashboard\");\n                    }else if (AuthService.getCurrentUser().roles.includes(\"ROLE_ADMIN\")) {\n                        navigate(\"/admin/transactions\");\n                    }\n                }, 5000)\n                localStorage.setItem(\"message\", JSON.stringify({ status: \"SUCCESS\", text: \"Login successfull!\" }))\n            },\n            (error) => {\n                const resMessage =(error.response && error.response.data && error.response.data.message) || error.message || error.toString();\n                console.log(resMessage);\n                if (resMessage === \"Bad credentials\"){\n                    setResponseError(\"Invalid email or password!\");\n                }else {\n                    setResponseError(\"Something went wrong: Try again later!\");\n                }\n            }\n          );\n        setIsLoading(false);\n    }\n\n    return(\n        <div className='container'>\n            <form className=\"auth-form\"  onSubmit={handleSubmit(onSubmit)}>\n            <Logo/>\n                <h2>Login</h2>\n                {\n                    (response_error!==\"\") && <p>{response_error}</p>\n                }\n                \n                <div className='input-box'>\n                    <label>Email</label><br/>\n                    <input \n                        type='text'\n                        {...register('email', {\n                            required: \"Email is required!\",\n                            pattern: {value:/^[\\w-.]+@([\\w-]+\\.)+[\\w-]{2,4}$/g, message:\"Invalid email address!\"}\n                        })}\n                    />\n                    {formState.errors.email && <small>{formState.errors.email.message}</small>}\n                </div>\n                \n                <div className='input-box'>\n                    <label>Password</label><br/>\n                    <input \n                        type='password'\n                        {\n                            ...register('password', {\n                                required: 'Password is required!'\n                            })\n                        }\n                    />\n                    {formState.errors.password && <small>{formState.errors.password.message}</small>}\n                </div>\n                <div className='msg'> <Link to={'/auth/forgetpassword/verifyEmail'} className='inline-link'>Forgot password?</Link></div><br/>\n                \n                <div className='input-box'>\n                    <input type='submit' value={isLoading ? \"Logging in...\" : 'Login'}\n                        className={isLoading ? \"button button-fill loading\" : \"button button-fill\"}\n                    />\n                </div>\n                <br/><div className='msg'>New member? <Link to='/auth/register' className='inline-link'>Register Here</Link></div>\n            </form>\n        </div>\n    )\n}\n\nexport default Login;"],"names":["navigate","useNavigate","useEffect","AuthService","getCurrentUser","roles","includes","register","handleSubmit","formState","useForm","response_error","setResponseError","useState","isLoading","setIsLoading","_jsx","className","children","_jsxs","onSubmit","async","login_req","data","email","password","then","setTimeout","localStorage","setItem","JSON","stringify","status","text","error","resMessage","response","message","toString","console","log","Logo","type","required","pattern","value","errors","Link","to"],"sourceRoot":""}