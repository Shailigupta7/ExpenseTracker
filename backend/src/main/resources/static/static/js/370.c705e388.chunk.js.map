{"version":3,"file":"static/js/370.c705e388.chunk.js","mappings":"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","sources":["components/userProfile/changePassword.js","components/userProfile/userProfileCard.js","pages/user/userProfile.js"],"sourcesContent":["import {useForm} from 'react-hook-form';\nimport { useRef, useState } from 'react';\nimport UserService from '../../services/userService';\nimport toast from 'react-hot-toast';\n\nfunction ChangePassword({email}) {\n\n    const {register, handleSubmit, watch, reset, formState} = useForm();\n    const password = useRef({});\n    password.current = watch('newPassword', \"\");\n    const [isLoading, setIsLoading] = useState(false);\n\n    const onSubmit = async (data) => {\n        setIsLoading(true);     \n        await UserService.settingsResetPassword(email, data.currentPassword, data.newPassword).then(\n            (response) => {\n                if (response.data.status === \"SUCCESS\"){\n                    toast.success(response.data.response)\n                    reset({currentPassword: \"\", newPassword: \"\", cpassword: \"\"})\n                    return\n                }\n            },\n            (error) => {\n                error.response ? \n                    toast.error(error.response.data.response)\n                : \n                    toast.error(\"Failed to change password: Try again later!\")\n            }\n          );\n        setIsLoading(false);\n    }\n\n    return(\n        <form className=\"auth-form t-form\"  onSubmit={handleSubmit(onSubmit)}>\n\n            <div className='input-box'>\n                <label>Current Password</label><br/>\n                <input \n                    type='password'\n                    {\n                        ...register('currentPassword', {\n                        required: 'Current password is required!',\n                            minLength: {\n                                value:8,\n                                message: \"Password must have atleast 8 characters\"\n                            }\n                        })\n                    }\n                />\n                {formState.errors.currentPassword && <small>{formState.errors.currentPassword.message}</small>}\n            </div>\n\n            <div className='input-box'>\n                <label>Password</label><br/>\n                <input \n                    type='password'\n                    {\n                        ...register('newPassword', {\n                        required: 'Password is required!',\n                            minLength: {\n                                value:8,\n                                message: \"Password must have atleast 8 characters\"\n                            }\n                        })\n                    }\n                />\n                {formState.errors.newPassword && <small>{formState.errors.newPassword.message}</small>}\n            </div>\n                \n            <div className='input-box'>\n                <label>Confirm Password</label><br/>\n                <input \n                    type='password'\n                    {\n                        ...register('cpassword', {\n                            required: 'Confirm password is required!',\n                            minLength: {\n                                value:8,\n                                message: \"Password must have atleast 8 characters\"\n                            },\n                            validate: cpass => cpass === password.current || \"Passwords do not match!\"\n                        })\n                    }\n                />\n                {formState.errors.cpassword && <small>{formState.errors.cpassword.message}</small>}\n            </div>\n\n            <div className='t-btn input-box'>\n                {/* <input type='submit' value={isLoading ? \"Updating...\" : 'Update password'}\n                    className={isLoading ? \"button button-fill loading\" : \"button button-fill\"}/> */}\n                {/* <input type='submit' className='button outline' value='Cancel' onClick={() => navigate('/user/transactions')}/> */}\n                <input type='submit' value={isLoading ? \"Updating...\" : 'Update password'}\n                    className={isLoading ? \"button button-fill loading\" : \"button button-fill\"} />\n            </div>\n            \n        </form>\n    )\n}\n\nexport default ChangePassword;","import user from '../../assets/images/user.png'\nimport useProfileImage from '../../hooks/useProfileImage';\nimport Loading from \"../utils/loading\";\n\nfunction ProfileCard({ username, email}) {\n\n    const [profileImg, isLoading, uploadProfileImage, removeProfileImage] = useProfileImage();\n\n    const handleFileChange = async (e) => {\n        const selectedFile = e.target.files[0];\n        const maxSize = 10 * 1024 * 1024;\n        if (selectedFile && selectedFile.size > maxSize) {\n            return\n        }\n        await uploadProfileImage(selectedFile)\n    }\n\n    return (\n        <div className='profile' style={{ maxWidth: '400px', flexDirection: 'column', justifyContent: 'center', padding: '25px' }}>\n            {\n                (isLoading) ?\n                    <Loading /> :\n                    (\n                        <>\n                            <div className=\"profile-img\">\n                                {!profileImg && <img src={user} width={140} height={140} alt='user'/>}\n                                {profileImg && <img src={profileImg} width={140} height={140} alt='user'/>}\n                                <div className=\"action\">\n                                    {profileImg && <label onClick={removeProfileImage}>Remove image</label>}\n                                    <label>\n                                        Change image\n                                        <input type=\"file\" onChange={handleFileChange} accept=\".jpg, .jpeg, .png\" />\n                                    </label>\n                                </div>\n                            </div>\n\n                            <div style={{ alignItems: 'center' }}>\n                                <h3 style={{color: 'var(--text)'}}>{username}</h3>\n                                <p>{email}</p>\n                            </div></>\n                    )\n            }\n        </div>\n    )\n}\n\nexport default ProfileCard;","import { useState, useEffect } from \"react\";\nimport AuthService from \"../../services/auth.service\";\nimport ProfileCard from \"../../components/userProfile/userProfileCard\";\nimport Header from '../../components/utils/header';\nimport ChangePassword from \"../../components/userProfile/changePassword\";\nimport Container from \"../../components/utils/Container\";\nimport { Toaster } from \"react-hot-toast\";\n\nfunction UserProfile() {\n\n    const [email, setEmail] = useState(\"\");\n    const [username, setUsername] = useState(\"\");\n\n    useEffect(() => {\n        const user = AuthService.getCurrentUser();\n\n        if (user) {\n            setEmail(user.email)\n            setUsername(user.username)\n        }\n    }, [])\n\n    return (\n        <Container activeNavId={3}>\n            <Header title=\"Settings\" />\n            <Toaster/>\n            <ProfileCard username={username} email={email} />\n            <ChangePassword email={email} />\n        </Container>\n    )\n}\n\nexport default UserProfile;"],"names":["_ref","email","register","handleSubmit","watch","reset","formState","useForm","password","useRef","current","isLoading","setIsLoading","useState","_jsxs","className","onSubmit","async","UserService","settingsResetPassword","data","currentPassword","newPassword","then","response","status","toast","success","cpassword","error","children","_jsx","type","required","minLength","value","message","errors","validate","cpass","username","profileImg","uploadProfileImage","removeProfileImage","useProfileImage","style","maxWidth","flexDirection","justifyContent","padding","Loading","_Fragment","src","user","width","height","alt","onClick","onChange","selectedFile","e","target","files","size","accept","alignItems","color","setEmail","setUsername","useEffect","AuthService","getCurrentUser","Container","activeNavId","Header","title","Toaster","ProfileCard","ChangePassword"],"sourceRoot":""}